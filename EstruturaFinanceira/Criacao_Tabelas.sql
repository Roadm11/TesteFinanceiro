CREATE DATABASE TesteRodrigoFinanceira
USE TesteRodrigoFinanceira
GO

IF (NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'Cliente'))
BEGIN
	CREATE TABLE Cliente
	(
		IdCliente	INT IDENTITY(1, 1) PRIMARY KEY,
		Nome		VARCHAR(100),
		UF			CHAR(2),
		Celular		VARCHAR(15)
	)
END

IF (NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'Financiamento'))
BEGIN
	CREATE TABLE Financiamento
	(
		IdFinanciamento INT IDENTITY(1, 1) PRIMARY KEY,
		IdCliente		INT,
		TpFinanciamento CHAR(1),
		ValorTotal		FLOAT,
		DtVencimento	DATETIME,
		FOREIGN KEY (IdCliente) REFERENCES Cliente(IdCliente)
	)
END

IF (NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'Parcelas'))
BEGIN
	CREATE TABLE Parcelas
	(
		IdFinanciamento INT,
		NumeroParcela	INT,
		ValorParcela	FLOAT,
		DtVencimento	DATETIME,
		DtPagamento		DATETIME,
		PRIMARY KEY (IdFinanciamento, NumeroParcela),
		FOREIGN KEY (IdFinanciamento) REFERENCES Financiamento(IdFinanciamento)
	)
END

GO

INSERT INTO Cliente VALUES
	('Rodrigo Antunes de Macedo', 'SP', '(11) 98765-4321'),
	('Giovanna Rafaela Moura', 'SP', '99435-6849'),
	('Daiane Louise da Mota', 'RJ', '(21) 99501-0256'),
	('Bryan Leandro Pinto', 'SP', '(11) 99461-6771'),
	('Nathan Yago Kevin Almeida', 'MG', '(32) 98152-5179'),
	('Cláudio Kevin Moreira', 'RJ', '98775-2947'),
	('Erick Geraldo dos Santos', 'BA', '(75) 99565-8344'),
	('Maya Renata da Luz', 'BA', '99894-8905'),
	('Stella Agatha Galvão', 'MT', '(65) 99989-7048'),
	('Igor Calebe Alves', 'SP', '98594-6084'),
	('Carlos Eduardo Bernardo Vicente Fogaça', 'BA', '99897-5492')

GO

INSERT INTO Financiamento VALUES
	(1, 3, 15600.34,	'2022-01-15'),
	(4, 1, 1000.48,		'2021-06-24'),
	(9, 2, 9780,		'2020-12-15'),
	(8, 2, 6548.69,		'2021-03-12'),
	(10,3, 87534,		'2021-06-03'),
	(3, 5, 900000,		'2022-03-24'),
	(4, 1, 3800.94,		'2021-07-24'),
	(7, 3, 3000,		'2021-01-12'),
	(2, 3, 20000,		'2021-07-20')

GO

INSERT INTO Parcelas 
	(IdFinanciamento, NumeroParcela, DtVencimento, ValorParcela, DtPagamento)
VALUES
	(1, '1', '2021-4-15', '1300.03', NULL),
	(1, '2', '2021-5-15', '1300.03', NULL),
	(1, '3', '2021-6-15', '1300.03', NULL),
	(1, '4', '2021-7-15', '1300.03', NULL),
	(1, '5', '2021-8-15', '1300.03', NULL),
	(1, '6', '2021-9-15', '1300.03', NULL),
	(1, '7', '2021-10-15', '1300.03', NULL),
	(1, '8', '2021-11-15', '1300.03', NULL),
	(1, '9', '2021-12-15', '1300.03', NULL),
	(1, '10', '2022-1-15', '1300.03', NULL),

	(2, '1', '2020-10-24', '83.37', '2020-10-24'),
	(2, '2', '2020-11-24', '83.37', '2020-11-24'),
	(2, '3', '2020-12-24', '83.37', '2020-12-24'),
	(2, '4', '2021-1-24', '83.37', NULL), 
	(2, '5', '2021-2-24', '83.37', NULL), 
	(2, '6', '2021-3-24', '83.37', NULL), 
	(2, '7', '2021-4-24', '83.37', NULL), 
	(2, '8', '2021-5-24', '83.37', NULL), 
	(2, '9', '2021-6-24', '83.37', NULL),

	(3, '1', '2020-5-15', '815.00', '2020-5-15'),
	(3, '2', '2020-6-15', '815.00', '2020-6-15'),
	(3, '3', '2020-7-15', '815.00', '2020-7-25'),
	(3, '4', '2020-8-15', '815.00', '2020-8-23'),
	(3, '5', '2020-9-15', '815.00', '2020-9-30'),
	(3, '6', '2020-10-15', '815.00', '2020-10-20'),
	(3, '7', '2020-11-15', '815.00', '2020-11-15'),
	(3, '8', '2020-12-15', '815.00', '2020-12-15'),
	
	(4, '1', '2020-4-12', '545.72', '2020-4-12'),
	(4, '2', '2020-5-12', '545.72', '2020-5-12'),
	(4, '3', '2020-6-12', '545.72', '2020-6-25'),
	(4, '4', '2020-7-12', '545.72', '2020-7-12'),
	(4, '5', '2020-8-12', '545.72', '2020-8-20'),
	(4, '6', '2020-9-12', '545.72', '2020-9-22'),
	(4, '7', '2020-10-12', '545.72', '2020-10-12'),
	(4, '8', '2020-11-12', '545.72', '2020-11-12'),
	(4, '9', '2020-12-12', '545.72', '2020-12-12'),
	(4, '10', '2021-1-12', '545.72', '2021-1-30'),
	(4, '11', '2021-2-12', '545.72', NULL),
	(4, '12', '2021-3-12', '545.72', NULL),
	
	(5, '1', '2021-4-03', '72.95', NULL),
	(5, '2', '2021-5-03', '72.95', NULL),
	(5, '3', '2021-6-03', '72.95', NULL),
	
	(6, '1', '2020-4-24', '37500.00', '2020-4-24'),
	(6, '2', '2020-5-24', '37500.00', '2020-5-24'),
	(6, '3', '2020-6-24', '37500.00', '2020-6-24'),
	(6, '4', '2020-7-24', '37500.00', '2020-7-24'),
	(6, '5', '2020-8-24', '37500.00', '2020-8-24'),
	(6, '6', '2020-9-24', '37500.00', '2020-9-24'),
	(6, '7', '2020-10-24', '37500.00', '2020-10-24'),
	(6, '8', '2020-11-24', '37500.00', '2020-11-24'),
	(6, '9', '2020-12-24', '37500.00', '2020-12-24'),
	(6, '10', '2021-1-24', '37500.00', '2021-1-24'),
	(6, '11', '2021-2-24', '37500.00', '2021-2-24'),
	(6, '12', '2021-3-24', '37500.00', '2021-3-24'),
	(6, '13', '2021-4-24', '37500.00', '2021-4-24'),
	(6, '14', '2021-5-24', '37500.00', NULL),
	(6, '15', '2021-6-24', '37500.00', NULL),
	(6, '16', '2021-7-24', '37500.00', NULL),
	(6, '17', '2021-8-24', '37500.00', NULL),
	(6, '18', '2021-9-24', '37500.00', NULL),
	(6, '19', '2021-10-24', '37500.00', NULL),
	(6, '20', '2021-11-24', '37500.00', NULL),
	(6, '21', '2021-12-24', '37500.00', NULL),
	(6, '22', '2022-1-24', '37500.00', NULL),
	(6, '23', '2022-2-24', '37500.00', NULL),
	(6, '24', '2022-3-24', '37500.00', NULL),
	
	(7, '1', '2021-4-24', '316.75', NULL),
	(7, '2', '2021-5-24', '316.75', NULL),
	(7, '3', '2021-6-24', '316.75', NULL),
	(7, '4', '2021-7-24', '316.75', NULL),
	
	(8, '1', '2020-12-12', '250.00', NULL),
	(8, '2', '2021-1-12', '250.00', '2021-1-25'),

	(9, '1', '2021-2-09', '3333.33', '2021-1-29'),
	(9, '2', '2021-2-09', '3333.33', '2021-2-25'),
	(9, '3', '2021-3-09', '3333.33', '2021-3-29'),
	(9, '4', '2021-4-09', '3333.33', NULL),
	(9, '5', '2021-5-09', '3333.33', NULL),
	(9, '6', '2021-6-09', '3333.33', NULL)

GO
